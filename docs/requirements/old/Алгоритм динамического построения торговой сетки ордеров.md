Бот строит сетку лимитных ордеров, отталкиваясь от динамически вычисляемой «Точки безубытка» (Pivot Point) и заданных параметров ценового канала. Весь процесс построения можно разделить на четыре ключевые группы параметров:

### 1\. Расчет центральной точки (Pivot Point)

Это фундаментальный параметр, от которого откладываются границы канала. Он представляет собой «истинную среднюю цену» (True Average Price) 1\.

* **Формула VWAP:** Pivot Point рассчитывается как средневзвешенная цена по объему (VWAP) с учетом всех операционных расходов.  
* *Формула:* $Pivot \= \\frac{\\sum (Price \\cdot Volume) \+ \\text{Расходы}}{\\sum Volume \- \\text{Комиссии}}$ 1\.  
* *Учет расходов:* В формулу закладываются затраты на создание Market ID (0.4 SOL), аренду аккаунтов (\~0.023 SOL), чаевые Jito (tips) и комиссии биржи (0.25%) 1\.  
* **Гармоничная история:** Для расчета используется история сделок. На старте берется годовая история пары SOL/USD, но по мере торгов бот плавно подмешивает собственную историю сделок (BMV/SOL) через скользящий коэффициент (Linear Fade-in) 1\.

### 2\. Геометрия канала (Асимметрия)

Сетка строится внутри **восходящего ценового канала**, параметры которого настраиваются асимметрично для зон покупки и продажи 2, 3\.

* **BUY-зона (Нижняя):** По умолчанию ширина составляет **15%** от Pivot Point. В этой зоне выставляются ордера на покупку 3\.  
* **SELL-зона (Верхняя):** По умолчанию ширина составляет **30%** от Pivot Point. В этой зоне выставляются ордера на продажу 3\.  
* **Визуальный эффект:** Такая настройка создает на графиках (например, DEXScreener) видимость того, что зона продаж в 2 раза шире зоны покупок, что является частью стратегии управления восприятием инвесторов 3\.

### 3\. Структура и плотность сетки

Параметры распределения ордеров внутри канала определяются техническими ограничениями OpenBook и логикой противодействия тренду.

* **Количество ордеров:** На один кошелек выставляется ровно **32 ордера** (технический лимит OpenBook): 16 на покупку и 16 на продажу 4, 3\.  
* **Распределение объема (Экспонента):** Объем ордеров не одинаков. Он растет по **экспоненте** от центра (Pivot) к краям канала 3\.  
* *Центр:* Мелкие ордера для тонкой коррекции.  
* *Края:* Крупные ордера («стенки») для сильного противодействия выходу цены за границы канала 2, 5\.  
* **Шаг сетки:** Расстояние между ордерами распределяется равномерно на всю ширину заданной зоны 3\.

### 4\. Защитные корректировки (Dynamic Modifiers)

Бот автоматически сдвигает или усиливает сетку на основе внешних факторов риска.

* **Фиатный пол (Fiat Floor):** Бот отслеживает кросс-курс SOL/USD. Если цена SOL падает, бот поднимает сетку покупок (в пересчете на SOL), чтобы удержать цену токена не ниже **\+15%** к фиату относительно цены старта 6\.  
* **Контроль эмиссии (Target Control PCT):** Бот следит за объемом токенов на чужих кошельках. Если «вражеский» объем растет, бот увеличивает плотность и объем ордеров в BUY-зоне, чтобы гарантировать контроль над 51%+ эмиссии 7\.

Таким образом, сетка строится не статично, а пересчитывается после каждого исполнения ордера (Fill), запуская цикл: *Очистка старых ордеров → Settle средств → Пересчет Pivot → Выставление новой сетки* 7\.  
