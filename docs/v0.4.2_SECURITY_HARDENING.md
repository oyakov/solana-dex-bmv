# v0.4.2 Security Hardening Overview

Version 0.4.2 introduces critical security enhancements to protect the BMV Eco System from credential theft, unauthorized access, and network-level attacks.

## 1. Secrets Management Refactor
- **Masked Configuration**: Hardcoded private keys and sensitive data have been removed from `config.yaml`.
- **Mandatory Environment Variables**: Critical secrets like `AUTH_SECRET`, `DASHBOARD_PASSWORD_HASH`, and `DB_PASSWORD` are now strictly enforced via environment variables. The bot will refuse to start if these are missing.
- **Improved Logging Security**: Settings structures now use custom `Debug` implementations to ensure sensitive fields (like private keys) are never printed to logs, even in debug mode.

## 2. API Hardening
- **Argon2id Password Hashing**: The dashboard's login system has been upgraded from plain-text comparison to **Argon2id**, the industry-standard salted password hashing algorithm.
- **Restrictive CORS Policy**: Permissive "allow all" CORS has been replaced with a restrictive policy. Allowed origins must be specified via the `ALLOWED_ORIGINS` environment variable.
- **JWT Authorization**: All control endpoints (`/api/control`, `/api/wallets/add`) are protected by JWT tokens with a 24-hour expiration.

## 3. DevOps & Infrastructure
- **Network-Level Security (Nginx)**: Provided a production-ready Nginx configuration template implementing:
  - TLS termination (HTTPS)
  - Strict Transport Security (HSTS)
  - Content Security Policy (CSP)
  - Rate limiting for API endpoints.
- **Non-Root Execution**: Verified and enforced the use of non-root users within Docker containers to minimize the impact of potential container escapes.

## 4. Dependencies Audit
- **Zero-Vulnerability Baseline**: Completed a full audit of Rust and NPM dependencies. 
- **Modern Crypto Libraries**: Integrated `argon2` and `jsonwebtoken` for secure identity management.

## Deployment Checklist
1. Generate an Argon2 hash for your dashboard password.
2. Set the `DASHBOARD_PASSWORD_HASH` and `AUTH_SECRET` environment variables on the host.
3. Update `.env` with the mandatory `DB_PASSWORD`.
4. Deploy using the provided Nginx template for TLS.
